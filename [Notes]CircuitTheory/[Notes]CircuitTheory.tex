% 若编译失败，且生成 .synctex(busy) 辅助文件，可能有两个原因：
% 1. 需要插入的图片不存在：Ctrl + F 搜索 'figure' 将这些代码注释/删除掉即可
% 2. 路径/文件名含中文或空格：更改路径/文件名即可

% --------------------- 文章宏包及相关设置 --------------------- %
% >> ------------------ 文章宏包及相关设置 ------------------ << %
% 设定文章类型与编码格式
\documentclass[UTF8]{report}		

% 本 .tex 专属的宏定义
    \def\V{\ \mathrm{V}}
    \def\mV{\ \mathrm{mV}}
    \def\kV{\ \mathrm{KV}}
    \def\KV{\ \mathrm{KV}}
    \def\MV{\ \mathrm{MV}}
    \def\A{\ \mathrm{A}}
    \def\mA{\ \mathrm{mA}}
    \def\kA{\ \mathrm{KA}}
    \def\KA{\ \mathrm{KA}}
    \def\MA{\ \mathrm{MA}}
    \def\O{\ \Omega}
    \def\mO{\ \Omega}
    \def\kO{\ \mathrm{K}\Omega}
    \def\KO{\ \mathrm{K}\Omega}
    \def\MO{\ \mathrm{M}\Omega}
    \def\Hz{\ \mathrm{Hz}}

% 自定义宏定义
    \def\N{\mathbb{N}}
    \def\F{\mathbb{F}}
    \def\Z{\mathbb{Z}}
    \def\Q{\mathbb{Q}}
    \def\R{\mathbb{R}}
    \def\C{\mathbb{C}}
    \def\T{\mathbb{T}}
    \def\S{\mathbb{S}}
    %\def\A{\mathbb{A}}
    \def\I{\mathscr{I}}
    \def\d{\mathrm{d}}
    \def\p{\partial}


% 导入基本宏包
    \usepackage[UTF8]{ctex}     % 设置文档为中文语言
    \usepackage{hyperref}  % 宏包：自动生成超链接 (此宏包与标题中的数学环境冲突)
    \hypersetup{
        colorlinks=true,    % false:边框链接 ; true:彩色链接
        citecolor={blue},    % 文献引用颜色
        linkcolor={blue},   % 目录 (我们在目录处单独设置)，公式，图表，脚注等内部链接颜色
        urlcolor={orange},    % 网页 URL 链接颜色，包括 \href 中的 text
        % cyan 浅蓝色 
        % magenta 洋红色
        % yellow 黄色
        % black 黑色
        % white 白色
        % red 红色
        % green 绿色
        % blue 蓝色
        % gray 灰色
        % darkgray 深灰色
        % lightgray 浅灰色
        % brown 棕色
        % lime 石灰色
        % olive 橄榄色
        % orange 橙色
        % pink 粉红色
        % purple 紫色
        % teal 蓝绿色
        % violet 紫罗兰色
    }
    % \usepackage{docmute}    % 宏包：子文件导入时自动去除导言区，用于主/子文件的写作方式，\include{./51单片机笔记}即可。注：启用此宏包会导致.tex文件capacity受限。
    \usepackage{amsmath}    % 宏包：数学公式
    \usepackage{mathrsfs}   % 宏包：提供更多数学符号
    \usepackage{amssymb}    % 宏包：提供更多数学符号
    \usepackage{pifont}     % 宏包：提供了特殊符号和字体
    \usepackage{extarrows}  % 宏包：更多箭头符号 
    \usepackage{multicol}   % 宏包：支持多栏 

% 文章页面margin设置
    \usepackage[a4paper]{geometry}
        \geometry{top=0.75in}
        \geometry{bottom=0.75in}
        \geometry{left=0.75in}
        \geometry{right=0.75in}   % 设置上下左右页边距
        \geometry{marginparwidth=1.75cm}    % 设置边注距离（注释、标记等）

% 配置数学环境
    \usepackage{amsthm} % 宏包：数学环境配置
    % theorem-line 环境自定义
        \newtheoremstyle{MyLineTheoremStyle}% <name>
            {11pt}% <space above>
            {11pt}% <space below>
            {}% <body font> 使用默认正文字体
            {}% <indent amount>
            {\bfseries}% <theorem head font> 设置标题项为加粗
            {：}% <punctuation after theorem head>
            {.5em}% <space after theorem head>
            {\textbf{#1}\thmnumber{#2}\ \ (\,\textbf{#3}\,)}% 设置标题内容顺序
        \theoremstyle{MyLineTheoremStyle} % 应用自定义的定理样式
        \newtheorem{LineTheorem}{Theorem.\,}
    % theorem-block 环境自定义
        \newtheoremstyle{MyBlockTheoremStyle}% <name>
            {11pt}% <space above>
            {11pt}% <space below>
            {}% <body font> 使用默认正文字体
            {}% <indent amount>
            {\bfseries}% <theorem head font> 设置标题项为加粗
            {：\\ \indent}% <punctuation after theorem head>
            {.5em}% <space after theorem head>
            {\textbf{#1}\thmnumber{#2}\ \ (\,\textbf{#3}\,)}% 设置标题内容顺序
        \theoremstyle{MyBlockTheoremStyle} % 应用自定义的定理样式
        \newtheorem{BlockTheorem}[LineTheorem]{Theorem.\,} % 使用 LineTheorem 的计数器
    % definition 环境自定义
        \newtheoremstyle{MySubsubsectionStyle}% <name>
            {11pt}% <space above>
            {11pt}% <space below>
            {}% <body font> 使用默认正文字体
            {}% <indent amount>
            {\bfseries}% <theorem head font> 设置标题项为加粗
            {：\\ \indent}% <punctuation after theorem head>
            {0pt}% <space after theorem head>
            {\textbf{#3}}% 设置标题内容顺序
        \theoremstyle{MySubsubsectionStyle} % 应用自定义的定理样式
        \newtheorem{definition}{}

%宏包：有色文本框（proof环境）及其设置
    \usepackage[dvipsnames,svgnames]{xcolor}    %设置插入的文本框颜色
    \usepackage[strict]{changepage}     % 提供一个 adjustwidth 环境
    \usepackage{framed}     % 实现方框效果
        \definecolor{graybox_color}{rgb}{0.95,0.95,0.96} % 文本框颜色。修改此行中的 rgb 数值即可改变方框纹颜色，具体颜色的rgb数值可以在网站https://colordrop.io/ 中获得。（截止目前的尝试还没有成功过，感觉单位不一样）（找到喜欢的颜色，点击下方的小眼睛，找到rgb值，复制修改即可）
        \newenvironment{graybox}{%
        \def\FrameCommand{%
        \hspace{1pt}%
        {\color{gray}\small \vrule width 2pt}%
        {\color{graybox_color}\vrule width 4pt}%
        \colorbox{graybox_color}%
        }%
        \MakeFramed{\advance\hsize-\width\FrameRestore}%
        \noindent\hspace{-4.55pt}% disable indenting first paragraph
        \begin{adjustwidth}{}{7pt}%
        \vspace{2pt}\vspace{2pt}%
        }
        {%
        \vspace{2pt}\end{adjustwidth}\endMakeFramed%
        }

% 外源代码插入设置
    % matlab 代码插入设置
    \usepackage{matlab-prettifier}
        \lstset{
            style=Matlab-editor,  % 继承matlab代码颜色等
        }
    \usepackage[most]{tcolorbox} % 引入tcolorbox包 
    \usepackage{listings} % 引入listings包
        \tcbuselibrary{listings, skins, breakable}
        \newfontfamily\codefont{Consolas} % 定义需要的 codefont 字体
        \lstdefinestyle{matlabstyle}{
            language=Matlab,
            basicstyle=\small\ttfamily\codefont,    % ttfamily 确保等宽 
            breakatwhitespace=false,
            breaklines=true,
            captionpos=b,
            keepspaces=true,
            numbers=left,
            numbersep=15pt,
            showspaces=false,
            showstringspaces=false,
            showtabs=false,
            tabsize=2
        }
        \newtcblisting{matlablisting}{
            arc=2pt,        % 圆角半径
            top=-5pt,
            bottom=-5pt,
            left=1mm,
            listing only,
            listing style=matlabstyle,
            breakable,
            colback=white   % 选一个合适的颜色
        }

% table 支持
    \usepackage{booktabs}   % 宏包：三线表
    \usepackage{tabularray} % 宏包：表格排版
    \usepackage{longtable}  % 宏包：长表格

% figure 设置
    \usepackage{graphicx}  % 支持 jpg, png, eps, pdf 图片 
    \usepackage{svg}       % 支持 svg 图片
        \svgsetup{
            % 指向 inkscape.exe 的路径
            inkscapeexe = C:/aa_MySame/inkscape/bin/inkscape.exe, 
            % 一定程度上修复导入后图片文字溢出几何图形的问题
            inkscapelatex = false                 
        }
    \usepackage{subcaption} % 用于子图和小图注  

% 图表进阶设置
    \usepackage{caption}    % 图注、表注
        \captionsetup[figure]{name=图}  
        \captionsetup[table]{name=表}
        \captionsetup{labelfont=bf, font=small}
    \usepackage{float}     % 图表位置浮动设置 

% 圆圈序号自定义
    \newcommand*\circled[1]{\tikz[baseline=(char.base)]{\node[shape=circle,draw,inner sep=0.8pt, line width = 0.03em] (char) {\small \bfseries #1};}}   % TikZ solution

% 列表设置
    \usepackage{enumitem}   % 宏包：列表环境设置
        \setlist[enumerate]{
            label=(\arabic*) ,   % 设置序号样式为加粗的 (1) (2) (3)
            ref=\arabic*, % 如果需要引用列表项，这将决定引用格式（这里仍然使用数字）
            itemsep=0pt, parsep=0pt, topsep=0pt, partopsep=0pt, leftmargin=3.5em} 
        \setlist[itemize]{itemsep=0pt, parsep=0pt, topsep=0pt, partopsep=0pt, leftmargin=3.5em}
        \newlist{circledenum}{enumerate}{1} % 创建一个新的枚举环境  
        \setlist[circledenum,1]{  
            label=\protect\circled{\arabic*}, % 使用 \arabic* 来获取当前枚举计数器的值，并用 \circled 包装它  
            ref=\arabic*, % 如果需要引用列表项，这将决定引用格式（这里仍然使用数字）
            itemsep=0pt, parsep=0pt, topsep=0pt, partopsep=0pt, leftmargin=3.5em
        }  

% 其它设置
    % 脚注设置
        \renewcommand\thefootnote{\ding{\numexpr171+\value{footnote}}}
    % 参考文献引用设置
        \bibliographystyle{unsrt}   % 设置参考文献引用格式为unsrt
        \newcommand{\upcite}[1]{\textsuperscript{\cite{#1}}}     % 自定义上角标式引用
    % 文章序言设置
        \newcommand{\cnabstractname}{序言}
        \newenvironment{cnabstract}{%
            \par\Large
            \noindent\mbox{}\hfill{\bfseries \cnabstractname}\hfill\mbox{}\par
            \vskip 2.5ex
            }{\par\vskip 2.5ex}

% 文章默认字体设置
    \usepackage{fontspec}   % 宏包：字体设置
        \setmainfont{SimSun}    % 设置中文字体为宋体字体
        \setCJKmainfont[AutoFakeBold=3]{SimSun} % 设置加粗字体为 SimSun 族，AutoFakeBold 可以调整字体粗细
        \setmainfont{Times New Roman} % 设置英文字体为Times New Roman

% 各级标题自定义设置
    \usepackage{titlesec}   
        \titleformat{\chapter}[hang]{\normalfont\huge\bfseries\centering}{第\,\thechapter\,章}{20pt}{}
        \titlespacing*{\chapter}{0pt}{-20pt}{20pt} % 控制上下间距
        % section标题自定义设置 
        \titleformat{\section}[hang]{\normalfont\Large\bfseries}{§\,\thesection\,}{8pt}{}
        \titlespacing*{\subsubsection}{0pt}{3pt}{0pt} % 控制上下间距
% subsubsection标题自定义设置
%\titleformat{\subsubsection}[hang]{\normalfont\bfseries}{}{8pt}{}

% --------------------- 文章宏包及相关设置 --------------------- %
% >> ------------------ 文章宏包及相关设置 ------------------ << %

% ------------------------ 文章信息区 ------------------------ %
% ------------------------ 文章信息区 ------------------------ %
% 页眉页脚设置
    \usepackage{fancyhdr}   %宏包：页眉页脚设置
        \pagestyle{fancy}
        \fancyhf{}
        \cfoot{\thepage}
        \renewcommand\headrulewidth{1pt}
        \renewcommand\footrulewidth{0pt}
        \lhead{2024.8-2025.1}
        \chead{Notes of Principles of Electric Circuits}    
        \rhead{dingyi233@mails.ucas.ac.cn}

%文档信息设置
    \title{电路原理笔记\\ Notes of Principles of Electric Circuits}
    \author{丁毅\\ \footnotesize 中国科学院大学，北京 100049\\ Yi Ding \\ \footnotesize University of Chinese Academy of Sciences, Beijing 100049, China}
    \date{\footnotesize 2024.8 -- 2025.1}
% ------------------------ 文章信息区 ------------------------ %
% ------------------------ 文章信息区 ------------------------ %

% 开始编辑文章

\begin{document} 
\zihao{5}           % 设置全文字号大小

% ------------------------ 封面序言与目录 ------------------------ %
% >> --------------------- 封面序言与目录 --------------------- << %
% 封面
    \maketitle\newpage  
    \pagenumbering{Roman} % 页码为大写罗马数字
    \thispagestyle{fancy}   % 显示页码、页眉等

% 序言
    \begin{cnabstract}\normalsize 
        本文为笔者本科时的电路原理笔记（Notes of Principles of Electric Circuits, 2024.9 -- 2025.1）。由于个人学识浅陋，认识有限，文中难免有不妥甚至错误之处，望读者不吝指正，在此感谢。\par
        我的邮箱是 dingyi233@mails.ucas.ac.cn。
    \end{cnabstract}
    \addcontentsline{toc}{chapter}{序言} % 手动添加为目录

% 目录
    \setcounter{tocdepth}{2}                % 目录深度（为1时显示到section）
    \tableofcontents                        % 目录页
    \addcontentsline{toc}{chapter}{目录}    % 手动添加此页为目录
    \thispagestyle{fancy}                   % 显示页码、页眉等 

% 收尾工作
    \newpage    
    \pagenumbering{arabic} 


% >> --------------------- 封面序言与目录 --------------------- << %
% ------------------------ 封面序言与目录 ------------------------ %

\chapter{绪论}\thispagestyle{fancy}

本章首先介绍几个有关电路的基本问题，然后介绍电路中相关物理量的定义，再简单介绍电路在信号处理与能量处理方面的应用，最后讨论电路的分类。本章是所有后续章节的共同基础。

\section{电路}
一般来讲，电路的研究内容分为电路分析、电路综合，分别对应电路研究的正问题（已知电路求电路的解）和逆问题（已知解求电路结构参数），本课程的重点在电路分析，对电路综合不深入探讨。

有些电路原理课程习惯用大写英文字母表示不随时间变化的常量，用小写英文字母表示随时间变化的量。在本笔记中，时变量（非恒定量）、瞬时量、微元量均用小写表示，其它情况一般用大写。

\begin{figure}[H]\centering
\begin{subfigure}[t]{0.52\textwidth}\centering
    \includegraphics[height=130pt]{assets/1,2/11b7879b24f71ddbf3e5316424203201.jpg}
    \caption{\bfseries 电路原理与其他电类主要课程的联系 }
\end{subfigure}\begin{subfigure}[t]{0.48\textwidth}\centering
    \includegraphics[height=130pt]{assets/1,2/电动势与电压.drawio.pdf}
    \caption{\bfseries 电压与电动势的三种表示方法 }
\end{subfigure}
\caption{\bfseries 电路原理与其他电类主要课程的联系、电压与电动势的三种表示方法 }\label{电路原理与其他电类主要课程的联系，电压与电动势的三种表示方法}
\end{figure}

\section{电流、电压和电势}

电势（电位，potential）：选定参考点（reference point）后，电路中某一点的电势，用 $\varphi$ 表示。如果不引起歧义，也常用 $U$ 表示。两点间电位差（电势差，potential difference）即为电压。电动势（electromotive force, e.m.f.）：非静电力克服电场力搬运单位正电荷所做的功（电势升， potential rise）。

在分析电路时，必须事先规定电路电流的参考方向（正方向），也必须规定电压的参考方向或参考极性。

电压与电动势参考方向有三种表示方式，分别为结点、正负和箭头，如图 \ref{电压与电动势的三种表示方法} 所示，要特别注意两者方向相反。

电压、电流定义式：
\begin{equation}
u_{ab} = \frac{\mathrm{d} w_{ab}}{\mathrm{d}q},\ i_{ab} = \frac{\mathrm{d} q_{ab}}{\mathrm{d}t}
\end{equation}



端口：封装好的电路元件与电路其它部分的联接点称为端纽、端子或接线端（terminal）。如果从元件的两个端纽看进去满足 $i = -i'$，则这两个端子被称为一个端口（port）
\footnote{任意二端电路元件都可以看作是一个端口}
，如图 \ref{端口示意图} 所示。

\begin{figure}[H]\centering
\includegraphics[width=0.35\textwidth]{assets/1,2/端口.drawio.pdf}
\caption{\textbf{端口示意图}}\label{端口示意图}
\end{figure}

与外部电路有 $n$ 个端口相连的电路称为 $n$ 端口网络（n-port network）。

部分常见的电路元件如图 \ref{部分常见电路元件} 所示（国家标准）：

\begin{figure}[H]\centering
\begin{subfigure}[t]{0.52\textwidth}\centering
    \includegraphics[height=160pt]{assets/1,2/7d3f6db847882c6447cc046186ede6ef.jpg}
\end{subfigure}\begin{subfigure}[t]{0.47\textwidth}\centering
    \includegraphics[height=160pt]{assets/1,2/3f5d73ec5ae9909ab42cd864852b0d72.jpg}
\end{subfigure}
\caption{\bfseries \textbf{部分常见电路元件} }\label{部分常见电路元件}
\end{figure}





\section{电路分析基本观点}


\begin{definition}[建立电路模型]
电阻、电感与电容：
\begin{equation}
U = RI,\ \varPsi = LI,\ Q = CU
\end{equation}

$R, L, C$ 被称为电路基本模型，是电路分析的最基本模型。对不同的电路，应采用不同的模型，以适应实际需要并满足所需精度。另外，电路中常常使用大量的等效观点来简化电路的分析，使其求解更易、物理意义更清晰、应用更方便。

\end{definition}


\section{电路信号处理}

电路信号可分为图 \ref{信号分类、信号示意图} (a) 中的几类，它们的示意图如图 \ref{信号分类、信号示意图} (b) 所示： 

\begin{figure}[H]\centering
\begin{subfigure}[t]{0.52\textwidth}\centering
    \includesvg[height=75pt]{assets/1,2/信号分类.drawio.svg}
    \caption{\bfseries 信号分类 }
\end{subfigure}\begin{subfigure}[t]{0.48\textwidth}\centering
    \includegraphics[height=75pt]{assets/1,2/1b9e0bed85e1f3a049de96f4c6018da8.jpg}
    \caption{\bfseries 信号示意图 }
\end{subfigure}
\caption{\bfseries 信号分类、信号示意图 }\label{信号分类、信号示意图}
\end{figure}

\section{电路能量处理}

\begin{definition}[功率]

二端元件吸收的瞬时功率（instantaneous power）为其单位时间内吸收的电能\footnote{在非关联参考方向下，瞬时吸收功率 $p = -ui$}：
\begin{equation*}
p(t) = \frac{\mathrm{d}w}{\mathrm{d}t} = \frac{\mathrm{d}w}{\mathrm{d}q}\cdot\frac{\mathrm{d}q}{\mathrm{d}t} = u(t)i(t) 
\end{equation*}


\begin{definition}[平均值、有效值]
对周期信号而言，其物理量有瞬时值、平均值、平均绝对值和有效值等特征量。以电压 $u = u(t)$ 为例：

\begin{enumerate}
\item 平均值（average value）：$\bar{u} = \frac{1}{T}\int_0^T u(t)\mathrm{d}t$
\item 绝对平均值（average absolute value）：$\overline{| u |} = \frac{1}{T}\int_0^T | u(t) |\mathrm{d}t$
\item 有效值（effective value）：$ U = \sqrt{\frac{1}{T}\int_0^T u^2(t)\mathrm{d}t} $
\end{enumerate}
电流 $i$ 与上面同理。特别地，对正弦交流电流（sinusoidal altering current）而言，其有效值 $I = \frac{I_{\mathrm{m}}}{\sqrt{2}},\ U = \frac{U_{\mathrm{m}}}{\sqrt{2}}$。
\end{definition}


\end{definition}


\section{电路分类}


\begin{definition}[静态 / 动态电路]
    电路里，将可以提供能量或信号的元件称为源（source），将对能量或信号进行传输、分配和处理的元件称为负载（load）。
    负载全为电阻的电路称为电阻电路或静态电路，否则称为动态电路。前者需求解代数方程组，后者需求解微分方程组。本书第 2~4 章讨论静态电路，第 5~6 章讨论动态电路。
\end{definition}


\begin{definition}[线性 / 非线性电路]
判断是否线性需要先定义系统的激励（excitation）和响应（response），设激励为 $x$ 而响应为 $y = f(x)$，则系统是否线性由 $f$ 决定。例如电阻是二端线性系统，发光二极管是二端非线性系统。
\end{definition}


\begin{definition}[时变 / 非时变电流]
参数随时间变化的元件称为时变元件，含此类元件的电路称为时变电路，否则称为非时变电路。
\end{definition}


\begin{definition}[有源 / 无源电路]
对任意的一端口网络来说，设其端口电压 $u = u(t)$ 且 $u(0) = 0$ ，电流 $i = i(t)$ 且 $i(0) = 0$，该电路称为无源电路如果：
\begin{equation}
\int_{0}^{t} u(t)i(t)\mathrm{d}t \geqslant 0,\ \forall\ t >0
\end{equation}
否则称为有源电路，无源元件和有源元件同理。
\end{definition}


其它还可分为集总 / 分布参数电路、模拟 / 数字电路等。

\section{其它}




\begin{center}\noindent\begin{minipage}{0.65\textwidth}
    \begin{definition}[电路的基本名词]
    以图 \ref{电路基本名词} 为例：
    \begin{enumerate}
    \item 支路：若干元件无分岔地首尾相连构成一条支路。图里有三条支路（竖向的），因此 $p = 3$。
    \item 节点（node）: 3个或更多支路的连接点。图中 $n = 4$。 
    \item 路径（path）: 两个节点间包含的支路个数。
    \item 回路（loop）: 由支路构成的闭合路径。图中 $l = 7$
    \item 网格（mesh）: 平面电路中不与其余支路相交的回路，即最小网格数。图中 $m = 3$
    \end{enumerate}
    \end{definition}
\end{minipage}\hfill\begin{minipage}{0.35\textwidth}
    \begin{figure}[H]\centering
        \includesvg[width=\textwidth]{assets/1,2/电路基本名词.drawio.svg}
        \caption{\textbf{电路基本名词}}\label{电路基本名词}
    \end{figure}
\end{minipage}\end{center}





\chapter{简单电阻电路}\thispagestyle{fancy}
\section{电阻}
设一均匀线性电阻微元长 $\mathrm{d} l$，横截面积为 $\mathrm{d}S$，电阻率为 $\sigma$，则阻值为
\begin{gather}
    \mathrm{d}R = \frac{\mathrm{d} l}{\sigma\mathrm{d}S} \Longrightarrow R = \frac{L}{\sigma S} = \frac{\rho L}{S},\quad 
\text{串联：}\ R = \sum_{i}R_i,\quad 
\text{并联：}\ \frac{1}{R} = \sum_{i}\frac{1}{R_i} 
\end{gather}

多数金属材料的电阻率随温度变化见下式，其中 $\alpha$ 称为电阻温度系数，在实际使用时，最好保持额定功率在实际承受功率的两倍以上，以免过载。常见材料的具体数值见表 \ref{常见材料的0度电阻率和温度系数}。
\begin{equation}
\rho(T) = \rho_0(1+\alpha T)
\end{equation}
\begin{table}[H]\centering\small
    \setlength{\tabcolsep}{2mm} % 调整列间距
    \caption{\textbf{常见材料的 0 \textdegree C 电阻率和温度系数 }}
    \label{常见材料的0度电阻率和温度系数}
    \resizebox{\linewidth}{!}{
        \begin{tabular}{cccccccccc}\toprule
            名称 & 银 & 铜 & 铝 & 钨 & 铁 & 碳 & 镍铬合金 & 镍铜合金\\
            \midrule
            $\rho_0\ (\Omega\cdot \mathrm{m})$
            &$1.5 \times 10^{-8}$ 
            &$1.6 \times 10^{-8}$ 
            &$2.5 \times 10^{-8}$ 
            &$2.5 \times 10^{-8}$ 
            &$8.7 \times 10^{-8}$ 
            &$3500 \times 10^{-8}$ 
            &$110 \times 10^{-8}$ 
            &$50 \times 10^{-8}$ \\
            $\alpha\ (\text{\textdegree C}^{-1})$
            &$4.0 \times 10^{-3}$ 
            &$4.3 \times 10^{-3}$ 
            &$4.7 \times 10^{-3}$ 
            &$4.6 \times 10^{-3}$ 
            &$5.0 \times 10^{-3}$ 
            &$-5.0 \times 10^{-4}$ 
            &$1.6 \times 10^{-4}$ 
            &$4.0 \times 10^{-5}$ \\
            \bottomrule
        \end{tabular}
    }
\end{table}


我们有欧姆定律微分形式和焦耳定律微分形式
\begin{equation}
i = \sigma E\ ,\ \ q =  \sigma E^2 = \frac{1}{\sigma} i^2  
\end{equation}

二极管模型如下，其中 $I_{\mathrm{S}}$ 为反向饱和电流（硅二极管典型值为 $10^{-12}$ A），$U_{TH}$ 为常数（典型值 25 mV）。
\begin{equation}
i = I_{\mathrm{S}}\left(e^{\frac{u}{U_{\mathrm{TH}}}} - 1\right)
\end{equation}

伏安特性曲线（$u$-$i$ 特性曲线，voltage current relationship，VCR）的表达式为 $i = f(u)$ 或 $f(u,i) = 0$，
到目前为止，我们讨论的电阻 $u$-$i$ 特性曲线都在平面的一三象限（正电阻），后文我们将在等效观念指导下用运算放大器来实现负电阻性质。

\section{电源}


\begin{definition}[独立电源]
与外接电路无关的二端电源称为独立电源（independent source），例如独立电压源（independent voltage source）和独立电流源（independent current source）
\footnote{电压为零的独立电压源等效于短路，电流为零的独立电流源等效于断路}。
\end{definition}


\begin{definition}[受控电源]

流经元件的电压或电流受电路中其它部分电压或电流控制的元件称为受控电源。最常见的例子是放大器，如电子管、晶体管（又称三极管）等。
依据控制量和受控量的不同，受控电源一般分为 4 种：
\begin{itemize}
    \item 压控电压源（voltage controlled voltage source, VCVS）
    \item 流控电压源（current controlled voltage source, CCVS）
    \item 压控电流源（voltage controlled current source, VCCS）
    \item 流控电流源（current controlled current source, CCCS）
\end{itemize}
它们的电路符号如图 \ref{受控电源电路符号} 所示。 

\begin{figure}[H]\centering
\includegraphics[width=0.7\textwidth]{assets/1,2/受控电源电路符号.drawio.pdf}
\caption{\textbf{受控电源电路符号}}\label{受控电源电路符号}
\end{figure}

图 \ref{受控电源电路符号} 中，控制量 $u_1$ 和 $i_1$ 分别是电路其它部分任意两点间的电压或电流；$\mu$ 是一个无量纲常数，称为电压放大倍数（转移电压比）；$r_m$ 是电阻量纲常数，称为转移电阻；$g_m$ 是电导量纲常数，称为转移电导；$\beta$ 是无量纲常数，称为电流放大倍数（转移电流比）。

分析含受控源电路时需要注意，受控源性质和独立源有本质差别，不应简单等同。
\end{definition}



\section{基尔霍夫定律}


\begin{BlockTheorem}[基尔霍夫电流定律, KCL]
基尔霍夫电流定律（Kirchhoff's Current Law，KCL）表示，在任意时刻，电路中流入任一节点的电流代数和都为 0。
\begin{equation}
\sum i(t) = 0,\ \forall\ t 
\end{equation}
KCL 不仅适用于节点，对含多个端子的子电路也适用，称为广义 KCL。此定律本质上是是电流连续性 $\frac{\mathrm{d}q}{\mathrm{d}t} = 0$。

$n$ 节点电路含 $n-1$ 个独立的电流节点方程，构成第一方程组。
\end{BlockTheorem}

\begin{BlockTheorem}[基尔霍夫电压定律, KVL]
基尔霍夫电压定律（Kirchhoff's Voltage Law，KVL）表示，在任意时刻，沿任意回路的电压降（代数和）为 0。
\begin{equation}
\sum u(t) = 0,\ \forall\ t
\end{equation}
此定律本质上是法拉第电磁感应定律 $\oint \boldsymbol{E} \mathrm{d}\boldsymbol{l} = -\frac{\p \phi_B}{\p t} = 0$。

$n$ 节点 $p$ 支路的电路含有 $p-n+1$ 个独立的回路方程（即最小网格数），构成第二方程组。
\end{BlockTheorem}


\section{电路等效变换}

\subsection{电阻等效变换}

\noindent\textbf{平衡电桥：}

如图 \ref{平衡电桥与Y-Delta等效变换} (a)，当 $\frac{R_1}{R_2} = \frac{R_3}{R_4}$ 时，$\varphi_A = \varphi_B$，AB 段无电流通过。 

\noindent\textbf{Y-$\Delta$ 等效变换：}

如图 \ref{平衡电桥与Y-Delta等效变换} (b)，一般情况见下面公式。特别地，当三个电阻都相等时，我们有 $R_{\Delta} = 3R_Y$。
\begin{gather}
\boxed{
\begin{matrix}
    \text{由 Y 求 $\Delta$ :}\quad R_{12}= R_1 + R_2 + \frac{R_1R_2}{R_3}, \quad
    R_{13}=R_1 + R_3 + \frac{R_1R_3}{R_2} , \quad
    R_{23}=R_2 + R_3 + \frac{R_2R_3}{R_1} \\ 
    \text{由 $\Delta$ 求 Y :}\quad R_{1}=\frac{R_{12}R_{13}}{R_0}, \quad
    R_{2}=\frac{R_{21}R_{23}}{R_0}, \quad
    R_{3}=\frac{R_{31}R_{32}}{R_0},\quad 
    R_0 = R_{12}+R_{13}+R_{23} 
\end{matrix}
}
\end{gather}



\begin{figure}[H]\centering
\begin{subfigure}[t]{0.46\textwidth}\centering
    \includegraphics[height=125pt]{assets/1,2/平衡电桥.drawio.pdf}
    \caption{\bfseries 平衡电桥 }
\end{subfigure}\begin{subfigure}[t]{0.54\textwidth}\centering
    \includegraphics[height=125pt]{assets/1,2/YDelta等效变换.drawio.pdf}
    \caption{\bfseries Y-$\Delta$ 等效变换 }
\end{subfigure}
\caption{\bfseries 平衡电桥与Y-Delta等效变换 }\label{平衡电桥与Y-Delta等效变换}
\end{figure}

\subsection{电源等效变换}

含电阻和受控源的二端网络一般可等效为一个电阻。由于电路性质只与电路内部结构和参数有关，与外接激励无关，因此无论是外接独立电压源，还是外接独立电流源，都可以求出等效电阻。


\begin{definition}[独立源等效替换]
如图 \ref{实际独立源等效变换、独立电流源串联} (a)，当满足下式时，两者可以等效替换 {\color{red}（注意变换前后的电流方向！）}。
\begin{equation}
U_S = I_SR_S\ \  \text{或}\ \  I_S = \frac{U_S}{R_S}
\end{equation}

例如，将电流源等效为电压源时，保持 $R_S$ 不变，令 $U_S = I_S R_S$ 即可；将电压源等效为电流源时，保持 $R_S$ 不变，令 $I_S = \frac{U_S}{R_S}$ 即可。

受控源可以像独立源一样进行等效变换，但要注意以下几点：
\begin{enumerate}
\item 对受控源作
等效变换时，如果变换只对受控量进行，则变换后仍是受控源，同时，不能将控制量所在支路变换掉
\item 当控制量与受控制量包含在一个二端网络内部时，可将此二端网络等效为一个电阻
\end{enumerate}
\end{definition}


\begin{definition}[独立电流源串联]
如图 \ref{实际独立源等效变换、独立电流源串联} (b) 所示，两个独立电流源串联，可以分别将其等效为独立电压源，等效仍成立。
\end{definition}

\begin{figure}[H]\centering
\begin{subfigure}[t]{0.53\textwidth}\centering
    \includegraphics[height=120pt]{assets/1,2/独立源等效.drawio.pdf}
    \caption{\bfseries 实际独立源等效变换、独立电流源串联 }
\end{subfigure}\begin{subfigure}[t]{0.47\textwidth}\centering
    \includegraphics[height=120pt]{assets/1,2/独立电流源并联.drawio.pdf}
    \caption{\bfseries 独立电流源串联 }
\end{subfigure}
\caption{\bfseries 实际独立源等效变换、独立电流源串联 }\label{实际独立源等效变换、独立电流源串联}
\end{figure}


\begin{definition}[独立电压源并联]
如图 \ref{} 所示，两个独立电压源并联，可以分别将其等效为独立电流源，处理并联关系后转换为电压源，最终得：
\begin{equation}
U = \frac{\frac{U_1}{R_1} + \frac{U_2}{R_2}}{\frac{1}{R_1} + \frac{1}{R_2}} = \frac{R_2U_1 + R_1U_2}{R_1+R_2}, \quad R = \frac{R_1R_2}{R_1 + R_2}
\end{equation}

{\color{red} （缺图：独立电压源串联）}

\end{definition}



\begin{definition}[最大功率传输]
大多数仅含独立源和线性电阻的电路都可等效为一个实际独立电压源（内阻 $R_S$）外接一个负载电阻 $R_L$，则当且仅当 $R_S = R_L$ 时，$R_L$ 有最大功率。
\begin{equation}
P_L = P_L(R_L) =  \left(\frac{U_S}{R_S + R_L}\right)^2R_L, \ P_{L,\mathrm{max}} = P_L(R_S) = \frac{U_S^2}{4R_S}
\end{equation}
\end{definition}



\begin{definition}[元件与电压源并联]
如图 \ref{元件与电压源并联}  所示。理想电压源两端并联一个元件或一个网络，对电压源外部仍等效为一个理想电压源，即并联的这个元件或网络对原本的外电路求解没有任何影响。\footnote{例题见习题集：例 2-6}

\begin{figure}[H]\centering
\includegraphics[width=0.5\textwidth]{assets/1,2/电阻与电源并联.drawio.pdf}
\caption{\textbf{元件与电压源并联}}\label{元件与电压源并联}
\end{figure}

例如，理想电压源 $U_s$ 的两端并联了一个电阻，对外等效结果是这个电阻不起作用。
\end{definition}

\begin{definition}[元件与电流源并联]
    类似地，理想电流源串联一个元件或一个网络，对电流源外部仍等效为一个理想电压源，即串联的这个元件或网络对原电路求解没有任何影响。\footnote{例题见习题集：例 2-7}
\end{definition}

\section{运算放大器}

\subsection{运算放大器 OPA 及其电气特性}


运算放大器（operational amplifier, Op Amp, OPA），简称运放，是一种性质特殊的多端集成电路，可视为电压放大器。借助 OPA，可实现模拟信号的各种数学运算。

在图 \ref{OPA 示意图} 中，OPA 的国标电路符号如图 (a) 所示，简化符号如图 (b) 所示，过去也惯用符号图 (c)。
\begin{figure}[H]\centering
\includegraphics[width=0.8\textwidth]{assets/1,2/OPA运放.drawio.pdf}
\caption{\textbf{OPA 示意图}}\label{OPA 示意图}
\end{figure}

其中，a 接线端称为反相输入端（inverting input），用 $u_-$ 表示；b 接线端称为同相输入端（noninverting input），用 $u_+$ 表示；o 接线端称为输出端（output），用 $u_o$ 表示; $V_{CC}$ supply voltage, working voltage），向 OPA 提供直流电压以保证其正常工作；接地端 ground 并非大地，而是电源 $V_{CC}$ 的公共参考零点；参数 $A$ 为开环放大倍数。需要注意，在图 \ref{OPA 示意图} (b) 中，因为省略了电源部分，所以包围 OPA 的封闭曲线不满足广义 KCL。

OPA 的主要电气参数包括：
\begin{enumerate}
\item $V_\text{CC}$ : 供电电压（supply voltage）
\item $A$ : 差模电压增益（diffrential mode voltage gain），在开环情况下\footnote{（无输入引回到输出, diffrential mode）}满足 $u_o = Au_d = A(u_+-u_-) $，$A$ 因元件和温度而变，通常在 $10^5\sim 10^8$ 之间。
\item $R_i$ : 输入电阻（input resistance），$u_-$ 和 $u_+$ 端的等效电阻，基本上在 $\mathrm{M} \Omega$ 量级。
\item $R_o$ : 输出电阻（output resistance），$u_o$ 和接地端的等效电阻，基本上在 $\Omega$ 量级。
\item $U_{\text{sat}}$ : 饱和电压（saturate voltage），一般比 $V_{\text{CC}}$ 低两 $\mathrm{V}$ 左右。
\end{enumerate}

\noindent\begin{minipage}{0.67\textwidth}
\hspace{2em}OPA 仅在线性区内满足 $u_o = Au_d$，实际与近似输入输出曲线如图 \ref{OPA 输入输出曲线} 所示，在非线性区对外相当于一个独立电压源，称为正向（负向）饱和区。事实上，线性区是一个相当小的范围，例如 $A = 10^5$，$U_\text{sat} = 13 \V$，则 $U_{\text{ds}} = 0.13 \mV$。 
    
\hspace{2em}影响OPA的其它电气参数还包括输入失调电压、输入失调电流、输入偏置电流、压摆率（或转换速率）、增益宽带积、共模抑制比、静态功耗等。我们会在后续的模电课程中讨论它们对 OPA 的具体影响。
\end{minipage}\hfill
\begin{minipage}{0.31\textwidth}
    \begin{figure}[H]\centering
        \includegraphics[width=\textwidth]{assets/1,2/image (49).jpg}
        \caption{\textbf{OPA 输入输出曲线}}\label{OPA 输入输出曲线}
        \end{figure}
\end{minipage}

由此可得出低频直流情形下 OPA 的低频受控源模型，如图 \ref{OPA 的低频受控源模型} (a) 所示。特别地，当电路电阻都在 $\kO$ 量级时，从工程的角度来看，可认为 $R_i = \infty$ 而 $R_o = 0$，如图 \ref{OPA 的低频受控源模型} (b) 所示。 

\begin{figure}[H]\centering
\includegraphics[width=0.7\textwidth]{assets/1,2/image (50).png}
\caption{\textbf{OPA 的低频受控源模型}}\label{OPA 的低频受控源模型}
\end{figure}

为了使 OPA 在多种场合可以正常使用，我们需要将一部分输出引回到输入，这种电路连接方式称为反馈（feedback）。将部分输出引到 $u_-$ 端，使得 $u_-$ 升高，进而抑制信号放大，可以构成负反馈；将部分输出引到 $u_+$ 端，使得 $u_+$ 升高，进而促进信号放大，可以构成正反馈。


先讨论一个负反馈的例子，如图 \ref{负反馈 OPA 电路} 所示，求电压放大倍数 $\frac{u_o}{u_i}$。

注意这里 $u_+ = 0$ 而 $u_- = u_i$，列出 KVL: 
\begin{gather}
u_i - iR_1 = u_1,\quad u_1 - iR_f = -Au_1 \Longrightarrow I =(1+A) \frac{u_1}{R_f} \\ 
\Longrightarrow \frac{u_o}{u_i} = \frac{-Au_1}{u_i} = \frac{-Au_1}{u_1+iR_1} = \frac{-A}{1+(1+A)\frac{R_1}{R_f}} = \frac{-AR_f}{AR_1 + (R_1 + R_f)}
\end{gather}
当电路电阻在 $\kO$ 量级，工程上可以认为：
\begin{equation}
\frac{u_o}{u_i} = -\frac{AR_f}{AR_1} = -\frac{R_f}{R_1}
\end{equation}
这样，信号放大倍数与 $A$ 无关，只需调整电阻值，即可得到合适的放大倍数。负反馈在保证 OPA 工作在线性区至关重要，同时，负反馈也可以很好的减弱噪声对输出信号的影响。有时希望 OPA 工作于饱和区，就需要引入正反馈。不加任何反馈的 OPA 也可用作电压大小的比较器。

\begin{figure}[H]\centering
\includegraphics[width=0.75\textwidth]{assets/1,2/image (51).png}
\caption{\textbf{负反馈 OPA 电路}}\label{负反馈 OPA 电路}
\end{figure}


\subsection{理想放大器 IOPA}

\begin{definition}[理想限制条件]
一个 OPA 称为理想放大器（ideal operational amplifier, IOPA）如果它同时满足 $R_i = \infty,\ R_o = 0,\ A = \infty$\footnote{在模电课程中还会讨论 IOPA 的其它限制条件}，其输入输出曲线如图 \ref{IOPA 输入输出曲线} 所示，用数学公式表示为：
\begin{equation}
\begin{cases}
    u_o \in (-U_{\text{sat}},\ +U_{\text{sat}}), &u_+ - u_i = 0 \\
    u_o = +U_{\text{sat}}, &u_+ - u_i > 0 \\
    u_o = -U_{\text{sat}}, &u_+ - u_i < 0 
\end{cases}
\end{equation}

对 IOPA 而言，始终有 $i_- = i_+ = 0$（因为 $R_i = \infty$），称为两条支路分别“虚断”。由于本小节讨论的 IOPA 始终处于线性区，因此有 $u_+ - u_- = 0 \Longrightarrow u_+ = u_- $，称为两点“虚短”。
\end{definition}

\begin{center}\noindent\begin{minipage}{0.4\textwidth}
        \begin{figure}[H]\centering
            \includegraphics[height=100pt]{assets/1,2/4323bb51980c2d4d8e127dfa2e8110d0.png}
            \caption{\textbf{IOPA 输入输出曲线}}\label{IOPA 输入输出曲线}
        \end{figure}
    \end{minipage}\begin{minipage}{0.49\textwidth}
        \begin{figure}[H]\centering
            \includegraphics[height=100pt]{assets/1,2/电压跟随器.png}
            \caption{\textbf{电压跟随器}}\label{电压跟随器}
        \end{figure}
\end{minipage}\end{center}

\subsection{含 IOPA 的常见电路}
下面我们给出一些含 IOPA 的电路，在应用“虚断”、“虚断”下，推导是容易的，因此我们仅给出其电气特性而不给具体推导过程，除非某个推导较为困难。需要注意，运用“虚断”的前提是 OPA 的输入电阻 $R_{i} = \infty$，运用“虚短”的前提是放大倍数 $A = \infty$。在实际应用或解题时，必须验证输出电压 $u_o$ 是否在线性区内，否则“虚短”不再成立，且输出  $u_o = \pm U_{\text{sat}}$ 。

求输入电阻时，用加压求流法，也即已知输入电压 $u_i$，求输入电流 $i_{i}$，由 $u_i = i_iR_i$ 即得输入电阻。求输出电阻时，将独立源置零（这里电压源短路，成为导线），然后加流求压，由 $u = iR_o$ 得输出电阻。

% \usepackage{booktabs}


\begin{table}[H]
    \centering
    \caption{\textbf{常见的含 OPA 电路}}
    \begin{tabular}{ccccc} 
    \toprule
    名称         & 输入电阻 $R_i$ & 输出电阻 $R_o$ & 输出电压 $u_o$ & 专门特性  \\
    \hline
    电压跟随器      &   $\infty$   &    0  &   $u_i$   &   保电压，隔电路    \\
    同相比例放大器    &   $\infty$    &  0    &   $(1+\frac{R_1}{R_2})u_i$   &   放大电压    \\
    反相比例放大器    &    $R_1$  &   0   &  $-\frac{R_f}{R_l}u_i$    &  缺点是 $R_i = R_1$     \\
    反相加法器      &   $R_{i,k} = R_k,\ k = 1,2,3$   &   0   &   $-R_f\left( \frac{u_1}{R_1} + \frac{u_2}{R_2} + \frac{u_3}{R_3} \right)$   &    -   \\
    减法器        &   {\small $R_{i,1} = R_1, R_{i,2} = R_2 + R_M$}   &   0   &   $-\frac{R_f}{R_1}u_1 + \frac{1+\frac{R_f}{R_1}}{ 1 + \frac{R_2}{R_M}}u_2$   &  并减串加      \\
    电流源 VCCS &   $\infty$    &    0  &   $\left(  1+\frac{R_L}{R_1} \right)u_i$   &   $i_o = \frac{u_i}{R_1}$    \\
    负电阻        &   $-\frac{R_1}{R_2}R$   &   -   &   $\left(  1+\frac{R_2}{R} \right)u_i$   &    阻值  $-\frac{R_1}{R_2}R$  \\
    \bottomrule
    \end{tabular}
\end{table}

\begin{definition}[电压跟随器]
电压跟随器可以在保持电压的同时，有效地隔离电路，保持电路的独立性，利于电路设计。
\begin{enumerate}
\item 输入电阻：$R_i = \infty$
\item 输出电阻：$R_o = 0$
\item 电压特性：$u_o = u_i$
\end{enumerate}
\end{definition}

\begin{figure}[H]\centering
    \begin{subfigure}[t]{0.37\textwidth}\centering
        \includegraphics[height=90pt]{assets/1,2/同相比例放大器.png}
        \caption{\bfseries 同相比例放大器}
    \end{subfigure}\begin{subfigure}[t]{0.37\textwidth}\centering
        \includegraphics[height=90pt]{assets/1,2/反向比例放大器.png}
        \caption{\bfseries 反向比例放大器}
    \end{subfigure}
    \caption{\bfseries 比例放大器}
\end{figure}

\begin{definition}[同相比例放大器]
同相比例放大器能够放大输入信号，优点是输入电阻为 $\infty$ 且输出电阻为 0.
\begin{enumerate}
\item 输入电阻：$R_i = \infty$
\item 输出电阻：$R_o = 0$
\item 电压特性：$u_o = (1+\frac{R_1}{R_2})u_i$
\end{enumerate}
\end{definition}


\begin{definition}[反相比例放大器]
反相比例放大器的缺点是输入电阻为 $R_1$ 非无穷。
\begin{enumerate}
\item 输入电阻：$R_i = R_1$
\item 输出电阻：$R_o = 0$
\item 电压特性：$u_o = - \frac{R_f}{R_l} u_i$
\end{enumerate}
\end{definition}

\begin{figure}[H]\centering
    \begin{subfigure}[t]{0.37\textwidth}\centering
        \includegraphics[height=90pt]{assets/1,2/反相加法器.png}
        \caption{\bfseries 反相加法器}
    \end{subfigure}\begin{subfigure}[t]{0.37\textwidth}\centering
        \includegraphics[height=90pt]{assets/1,2/减法器.png}
        \caption{\bfseries 减法器}
    \end{subfigure}
    \caption{\bfseries 反相加法器与减法器}
\end{figure}


\begin{definition}[反相加法器]
反相加法器的输入电阻平凡（非无穷），输出电阻为 0。
\begin{enumerate}
\item 输入电阻：$R_{i,1} = R_1,\ R_{i,2} = R_2,\ R_{i,3} = R_3$
\item 输出电阻：$R_o = 0$
\item 电压特性：$u_o = - R_f\left( \frac{u_1}{R_1} + \frac{u_2}{R_2} + \frac{u_3}{R_3} \right) $
\end{enumerate}
\end{definition}


\begin{definition}[减法器]
可以发现，减法器是在加法器的基础上，改变了 $u_+$ 端的电压而得。同理，向 $u_-$ 端并联电压源，或往 $u_+$ 端串联电压源，可以得到更普适的加减法器。但不能得到同相加法器，因为存在输入电阻为 0 的端口。
\begin{enumerate}
\item 输入电阻：$R_{i,1} = R_1,\ R_{i,2} = R_2 + R_M$
\item 输出电阻：$R_o = 0$
\item 电压特性：$u_o = -\frac{R_f}{R_1}u_1 + \frac{1+\frac{R_f}{R_1}}{1+\frac{R_2}{R_M}}u_2 $
\end{enumerate}
\end{definition}

\begin{figure}[H]\centering
\begin{subfigure}[t]{0.37\textwidth}\centering
    \includegraphics[height=95pt]{assets/1,2/压控电流源.png}
    \caption{\bfseries 压控电流源 VCCS}
\end{subfigure}\begin{subfigure}[t]{0.37\textwidth}\centering
    \includegraphics[height=95pt]{assets/1,2/负电阻.png}
    \caption{\bfseries  负电阻}
\end{subfigure}
\caption{\bfseries 压控电流源 VCCS 和负电阻 }
\end{figure}


\subsubsection{压控电流源 VCCS: }
当输出电压 $u_o$ 在线性区时（受 $u_i$ 和负载 $R_L$ 影响），构成一个压控电流源。
\begin{enumerate}
\item 输出电流（负载电流）：$i_o = \frac{u_i}{R_1}$
\item 输入电阻：$R_i = \infty$
\item 输出电阻：$R_o =  0$（$R_L$ 两端是输出端）
\item 电压特性：$u_o = (1+\frac{R_L}{R_1})u_i$
\end{enumerate}


\begin{definition}[负电阻]
当输出电压 $u_o$ 在线性区时，构成一个负电阻（即输入电阻），在这里不存在输出电阻的概念。
\begin{enumerate}
\item 负电阻值（输入电阻）：$R_i = -\frac{R_1}{R_2}R$
\item 电压特性：$u_o = (1+\frac{R_2}{R})u_i$
\end{enumerate}
\end{definition}

\subsection{其它含 OPA 的电路}

电压比较器、正反馈 IOPA、滞回比较器等，详见参考文献 \cite{电路原理} 的 Page 66。


\subsection{自设计线性运算器}
图 \ref{自设计线性运算器} 是在加法器、减法器的基础上，自己设计的线性运算器，它可以实现任意数量的输入（电压）信号的任意线性运算。事实上，在此线性运算器中，电阻 $R_M$ 和电阻 $R_P$ 是关键，因为在正相信号间的比例、反相信号间的比例分别确定时，这两个电阻实现了正信号和负信号之间的比例调整，使得最终输出的正、负信号可以任意大或任意小（最小即为 0，不占任何比例）。

图中，红色端是加法信号，蓝色端是减法信号，绿色端为公共地（可只保留一个）。

\begin{figure}[H]\centering
\begin{subfigure}[t]{0.49\textwidth}\centering
    \includegraphics[height=140pt]{assets/1,2/线性运算器.png}
    \caption{\bfseries 线性运算器电路图 }
\end{subfigure}\begin{subfigure}[t]{0.49\textwidth}\centering
    \includegraphics[height=140pt]{assets/1,2/线性运算器接线端.png}
    \caption{\bfseries 接线端示意图 }
\end{subfigure}
\caption{\bfseries 自设计线性运算器 }\label{自设计线性运算器}
\end{figure}


我们先研究图 \ref{自设计线性运算器} (a) 的输出特性，再讨论如果没有电阻 $R_M$ 或 $R_P$，输出电压会受到什么限制。输出电压的推导是简单的，先考虑点 A 的电势 $u_A$，求得：
\begin{equation}
u_A = \frac{\frac{u_1}{R_1} + \frac{u_2}{R_2}}{\frac{1}{R_1} + \frac{1}{R_2} + \frac{1}{R_p}}
\end{equation}

{\par\color{gray}\small
$u_A$ 的推导，除了列 KCL, KVL 硬解之外，还可以这样：先将 $R_p$ 断路，这样 $u_2, R_2, u_1, R_1$ 构成并联的两个实际电压源（自带电阻），容易求得此时点 A 的电势 $u_A$，并做数学上的形式变换：
\begin{equation}
u_A = \frac{R_2u_1 + R_1u_2}{R_1+R_2} =\frac{\frac{u_1}{R_1} + \frac{u_2}{R_2}}{\frac{1}{R_1} + \frac{1}{R_2} }
\end{equation}
于是，我们再并联一个实际电压源 P 后，由数学上直接推广，可以得到 $u_A$ 为：
\begin{equation}
    u_A = \frac{\frac{u_1}{R_1} + \frac{u_2}{R_2} + \frac{u_p}{R_p}}{\frac{1}{R_1} + \frac{1}{R_2} + \frac{1}{R_p}}
\end{equation}
再令 $u_p = 0$，即得图 \ref{自设计线性运算器} 中的原始 $u_A$。
\par}

再考虑左侧的电流组，并利用虚断：
\begin{align}
&\begin{cases}
    i_3 = \frac{1}{R_3}(u_3 - u_A) \\ 
    i_4 = \frac{1}{R_4}(u_4 - u_A) \\ 
    i_m = \frac{1}{R_m}(0 - u_A) \\ 
    i_f = i_3 + i_4 + i_m
\end{cases}
\Longrightarrow 
u_o = u_A - R_fi_f = u_A - R_f\left( i_3 + i_4 + i_m \right) \\ 
\Longrightarrow
u_o &=u_A - R_f \left[ 
\frac{u_3}{R_3} + \frac{u_4}{R_4} - u_A\left( \frac{1}{R_3} + \frac{1}{R_4} + \frac{1}{R_m} \right)
\right] \\ 
&=
\left[1 + R_f \left(\frac{1}{R_3} + \frac{1}{R_4} + \frac{1}{R_m} \right)\right] u_A - R_f \left( \frac{u_3}{R_3} + \frac{u_4}{R_4} \right) 
\end{align}
代入 $u_A$，整理得到：
\begin{equation}
\boxed{
    u_o= \frac{1 + \frac{R_f}{R_m} \left(\frac{1}{R_3} + \frac{1}{R_4}  \right)}{ \frac{1}{R_p} + \left(\frac{1}{R_1} + \frac{1}{R_2} \right)}\cdot \left( \frac{{\color{red} u_1}}{R_1} + \frac{{\color{red} u_2}}{R_2} \right) - R_f \cdot \left( \frac{{\color{red} u_3}}{R_3} + \frac{{\color{red} u_4}}{R_4} \right)
}
\end{equation}
这样，对于所有加法信号，可以通过 $R_1, R_2$ 间的比例来调整它们在加法中的输出比例，类似地，减法信号通过 $R_3, R_4$ 间的比例来调整它们在减法中的输出比例。最后通过 $R_f, R_m, R_p$ 来调整加法、减法之间的输出比例。在 $R_f, R_m, R_p$ 都可变时，易证（减法占比） $R_f \in [0,\ \infty)$，（加法占比）$\frac{1 + R_f \left(\frac{1}{R_3} + \frac{1}{R_4} + \frac{1}{R_m} \right)}{\frac{1}{R_1} + \frac{1}{R_2} + \frac{1}{R_p}} \in [0,\ \infty)$，于是全部系数都具有任意性，此线性运算器能够实现任意的线性运算。

上面的电路容易推广到任意输入信号个数的情形。假设有 $m$ 个加法信号 $u_{s_1}, \dots, u_{s_m}$，它们对应的串联电阻分别 $R_{s_1}, \dots, R_{s_m}$；以及$n$ 个减法信号 $u_{r_1}, \dots, u_{r_n}$，它们对应的串联阻值分别 $R_{r_1}, \dots, R_{r_n}$。直接由数学上推广出去，得到输出电压 
$u_o$ 的表达式为：

\begin{equation}
\boxed{
u_o = 
\left(
    \frac{1 + \frac{R_f}{R_m} + \displaystyle R_f\sum_{i=s_1}^{i=s_m} \frac{1}{R_i}
    }{
        \frac{1}{R_p} + \displaystyle \sum_{i=r_1}^{i=r_n} \frac{1}{R_i}
    }
\right)\cdot \displaystyle\sum_{i=s_1}^{i=s_m} \frac{{\color{red} u_i}}{R_i}  - R_f \cdot  \displaystyle\sum_{i=r_1}^{i=r_n} \frac{{\color{red} u_i}}{R_i}
}
\end{equation}

此线性运算器的具体仿真示例见 Homework 3.

\subsection{自设计线性运算器的两个关键电阻}

回到刚刚的问题，在图 \ref{自设计线性运算器} (a) 中，考虑没有电阻 $R_p$ 的情况，也即令 $R_p = \infty$。此时，对于给定的 $R_1, R_2, R_3, R_4$，减法总系数范围仍为 $[0,\ \infty)$，但加法的总系数范围却是 $[\frac{1}{R_1} + \frac{1}{R_2} ,\ \infty)$。

考虑两个电阻都没有的情况，令 $R_p = R_m = \infty$，则减法部分总系数为 1 不可改变，加法的总系数范围 $[\frac{1}{R_1} + \frac{1}{R_2} ,\ \infty)$

\subsection{OPA 实现指数对数乘法除法积分微分运算}

利用二极管可以实现指数和对数运算，乘法和除法由对数运算、线性运算、指数运算依次复合而成，引入电容可以实现积分、微分运算，详见 \href{https://zhuanlan.zhihu.com/p/628064125}{知乎：运算放大器的典型应用}，这里不再赘述。特别地，引入电感还可以实现信号的相位移动。

关于 OPA 在 Multisim 中的仿真，可以参考 \href{https://space.bilibili.com/82683828}{Bilibili: 工程师看海} 的视频，以及仿真时的一些细节，我们不多赘述。

\section{二端口网络}

本 section 拓展阅读：
\begin{enumerate}
    \item \href{https://zhuanlan.zhihu.com/p/574470858}{知乎：二端口网络知识总结}
    \item \href{https://zhuanlan.zhihu.com/p/359677789}{知乎：从线性代数的角度理解线性二端口网络}
    \item \href{https://www.zhihu.com/question/357342024/answer/1477595759}{知乎：如何记住二端口ZYTH参数？}
\end{enumerate}

\subsection{二端口的概念与参数矩阵}


一个线性{\color{red} 无独立源}的四端网络称为二端口网络（two-port network）如果它的四个接线端构成两个端口，简称为二端口\footnote{需要注意，许多常见的含 OPA 电路都不构成端口（因为忽略了 OPA 的电源输入）。}。另外，有唯一公共端的 $n+1$ 端网络可以看作 $n$ 端口网络。
大多数时候，我们仅关心二端口的 $u$-$i$ 关系，其参数定义见表 \ref{参数矩阵代表的意义}。

相应地，表中矩阵参数表示的关系为：
\begin{gather}
\begin{bmatrix}
    i_1\\
    i_2\\
\end{bmatrix}
= 
\boldsymbol{G}
\cdot
\begin{bmatrix}
    u_1\\ 
    u_2\\
\end{bmatrix}
,\quad 
\begin{bmatrix}
    u_1\\
    u_2\\
\end{bmatrix}
= 
\boldsymbol{R}
\cdot
\begin{bmatrix}
    i_1\\ 
    i_2\\
\end{bmatrix}\quad 
\begin{bmatrix}
    u_1\\
    i_1\\
\end{bmatrix}
= 
\boldsymbol{T}
\cdot
\begin{bmatrix}
    u_2\\ 
    {\color{red} -i_2}\\
\end{bmatrix} 
,\quad 
\begin{bmatrix}
    u_1\\
    i_2\\
\end{bmatrix}
= 
\boldsymbol{H}
\cdot
\begin{bmatrix}
    u_2\\ 
    i_1\\
\end{bmatrix}
\end{gather}

\begin{table}[H]\centering
% \setlength{\tabcolsep}{1.5mm} % 调整列间距
    \caption{\textbf{参数矩阵代表的意义}}
    \label{参数矩阵代表的意义}
\begin{tabular}{cccccccccc}\toprule
    因变量& 自变量 & 参数矩阵 & 复参数名称\\
    \midrule
    $i_1, i_2$ & $u_1, u_2$ & 电导矩阵 $\boldsymbol{G}$ (conductance parameter) & $\boldsymbol{Y}$ 参数\\
    $u_1, u_2$ & $i_1, i_2$ & 电阻矩阵 $\boldsymbol{R}$ (resistance parameter) & $\boldsymbol{Z}$ 参数\\
    $u_1, i_1$& $u_2, i_2$&  传输矩阵 $\boldsymbol{T}$ (transmission parameter) & $\boldsymbol{T}$ 参数\\
    $u_1, i_2$& $u_2, i_1$&  混合矩阵 $\boldsymbol{H}$ (hybrid parameter matrix) & $\boldsymbol{H}$ 参数\\
    \bottomrule
\end{tabular}
\end{table}

其中 $\boldsymbol{R}$ 参数的 $R_{11}$ 和 $R_{22}$ 分别两个端口的输入电阻。
互易、对称二端口的概念不提，相关总结见图 \ref{二端口相关概念}。多个二端口网络级联\footnote{级联是二端口电路连接方式的一种，常见的连接方式有串联、并联、级联等，在后文会讨论}时，总参数矩阵是各网络参数矩阵的乘积。

需要特别注意的是，$\boldsymbol{T}$ 的互易条件是 $\det T = 1$ 而 $\boldsymbol{H}$ 的互易条件是 $H_{12} + H_{21} = 0$。

二端口吸收的功率 $p$ :
\begin{equation}
    p = u_1i_1 + u_2i_2
\end{equation}

另外，注意二端口两端输入电压的负极不一定等电势，也即 $u_1 = u_{1,+} - u_{1,-}$，$u_2 = u_{2,+} - u_{2,-}$，但不一定有 $u_{1,-} = u_{2,-}$。

\subsection{输入电阻与输出电阻}
\begin{LineTheorem}[戴维宁定理]\label{戴维宁定理}
一个含独立电源、线性电阻和受控源的一端口电路，对外可以等效成一个电压源和一个电阻串联，电压等于原电路端口两端的开路电压，电阻等于全部独立源置 0 （电压源短路，电流源断路）时的等效电阻。
\end{LineTheorem}

\begin{LineTheorem}[诺顿定理]\label{诺顿定理}
一个含独立电源、线性电阻和受控源的一端口电路，对外可以等效成一个电流源和一个电阻并联，电流大小等于原电路短路时端口流过的电流，电阻也是等于全部独立源置 0 （电压源短路，电流源断路）时的等效电阻。
\end{LineTheorem}

对二端口网络，计算输入电阻时，将输出端断开；计算输出电阻时，将输入端置零（用一根导线替代电源，若没有电源则相连）。

\newpage
\begin{figure}[H]\centering
\includegraphics[width=\textwidth]{assets/1,2/二端口网络.jpg}
\caption{\bfseries 二端口相关概念}\label{二端口相关概念}
\end{figure}

\begin{figure}[H]\centering
\includegraphics[width=\textwidth]{assets/1,2/image (9).jpg}
\caption{\bfseries 参数矩阵间的关系与等效电路}\label{参数矩阵间的关系与等效电路}
\end{figure}

\subsection{二端口的常见联接方式}

必须指出的是，在二端口进行联接时，子二端口的端口条件可能被破坏，称为非正规联接，此时不能应用下面的结论计算电路参数。级联一定是正规联接，但其它联接方法是否正规，需要进行判断。若为白箱，可通过推导判断，若为黑箱，需通过实验验证端口条件，具体的验证方法见参考文献 \cite{电路原理导学导教} 的 Page 23，我们不多赘述。

另外，在计算各参数矩阵的值时（尤其是 $\boldsymbol{T}$、$\boldsymbol{H}$ 参数），一定不要忘记在最终数值结果中写上单位。

\begin{table}[H]\centering
    %\renewcommand{\arraystretch}{1.5} % 调整行间距为 1.5 倍
    %\setlength{\tabcolsep}{1.5mm} % 调整列间距
    \caption{\textbf{二端口的六种常见连接方式}}
    \label{二端口的六种常见连接方式}
\begin{tabular}{cccccccccc}\toprule
    连接方式 & 参数矩阵 & 连接方式 & 参数矩阵 & 连接方式 & 参数矩阵\\
    \midrule
    级联  &  $\boldsymbol{T} = \boldsymbol{T_1}\cdot \boldsymbol{T_2}$    &   串联 & $\boldsymbol{R} = \boldsymbol{R_1} \cdot \boldsymbol{R_2}$ & 串并联 & $\boldsymbol{H} = \boldsymbol{H_1} + \boldsymbol{H_2}$ \\ 
    负级联 &  $\boldsymbol{T} = -\boldsymbol{T_1}\cdot \boldsymbol{T_2}$  &   并联 & $\boldsymbol{G} = \boldsymbol{G_1}\cdot \boldsymbol{G_2}$ & 并串联 & $\boldsymbol{H^{-1}} = \boldsymbol{H_1^{-1}} + \boldsymbol{H_2^{-1}}$\\ 
    \bottomrule
\end{tabular}
\end{table}

\begin{figure}[H]\centering
\begin{subfigure}[t]{0.42\textwidth}\centering
    \includegraphics[height=60pt]{assets/2/级联.png}
    \caption{\bfseries 级联 }
\end{subfigure}\begin{subfigure}[t]{0.58\textwidth}\centering
    \includegraphics[height=60pt]{assets/2/负级联.png}
    \caption{\bfseries 负级联 }
\end{subfigure}
\caption{\bfseries 二端口级联、负级联}
\end{figure}

\begin{figure}[H]\centering
\begin{subfigure}[t]{0.46\textwidth}\centering
    \includegraphics[height=120pt]{assets/2/串联.png}
    \caption{\bfseries 串联 }
\end{subfigure}\begin{subfigure}[t]{0.54\textwidth}\centering
    \includegraphics[height=120pt]{assets/2/并联.png}
    \caption{\bfseries 并联 }
\end{subfigure}
\caption{\bfseries 二端口串联、并联 }
\end{figure}

\begin{figure}[H]\centering
\begin{subfigure}[t]{0.5\textwidth}\centering
    \includegraphics[height=100pt]{assets/2/串并联.png}
    \caption{\bfseries 串并联 }
\end{subfigure}\begin{subfigure}[t]{0.5\textwidth}\centering
    \includegraphics[height=100pt]{assets/2/并串联.png}
    \caption{\bfseries 并串联 }
\end{subfigure}
\caption{\bfseries 二端口串并联、并串联 }
\end{figure}

\subsection{参数矩阵间的转换与等效电路}
$\boldsymbol{G}$ 与 $\boldsymbol{R}$ 矩阵之间满足 $\boldsymbol{G}^{-1} = \boldsymbol{R}$（如果可逆），其它关系见图 \ref{参数矩阵间的关系与等效电路}。

{\color{red} 不含独立源}的二端口网络一定可以被等效，满足所需的参数矩阵相同即可。特别地，若二端口满足互易条件，则可以等效为一个三电阻电路。特别注意，$\boldsymbol{T}$ 参数等效时 ${\color{red} R_T = \frac{1}{T_{21}} \ne}  \frac{1}{T_{21}}$。
\begin{equation}
\begin{matrix}
    \text{$\boldsymbol{R}$ 互易, T 型等效} \\ 
    \begin{cases}
        R_T = R_{12} = R_{21} \\ 
        R_1 = R_{11} - R_T \\ 
        R_2 = R_{22} - R_T 
    \end{cases}
\end{matrix},\quad 
\begin{matrix}
    \text{$\boldsymbol{G}$ 互易, $\pi $ 型等效} \\ 
    \begin{cases}
        G_{\pi} = -G_{12} = -G_{21} \\ 
        G_1 = G_{11} - G_{\pi} \\ 
        G_2 = G_{22} - G_{\pi} \\ 
    \end{cases}
\end{matrix}\quad 
\begin{matrix}
    \text{$\boldsymbol{T}$ 互易, T 型等效} \\
    \begin{cases}
        {\color{red} R_T = \frac{1}{T_{21}}}\\ 
        R_1 = R_T(T_{11} -1) \\ 
        R_2 = R_T(T_{22} -1) \\ 
    \end{cases}
\end{matrix}
\end{equation}



\begin{center}\noindent\begin{minipage}{0.58\columnwidth}
    \hspace*{2em} 普遍的等效需要受控源，参数 $\boldsymbol{G}$ 和 $\boldsymbol{S}$ 的等效详见参考文献 \cite{电路原理} Page 79，这里只提 $\boldsymbol{T}$ 和 $\boldsymbol{H}$ 如何等效。等效的思路是相同的，都是得到两个因变量的表达式，一个端口各一个（例如 ($u_1, u_2$) 或者 $(u_1, i_2)$），这样便将电路分为了两部分，分别用受控源和电阻进行等效即可。

    \hspace*{2em} 已知 $\boldsymbol{T}$ 参数时，依据参数转换关系求出 $\boldsymbol{H}$ 参数，以得到表达式 $u_1 = u_1(u_2,i_1), i_2 = i_2(u_2,i_1)$，此时可以等效为右图电路。
\end{minipage}\hfill\begin{minipage}{0.39\columnwidth}
    \begin{figure}[H]\centering
        \includesvg[width=\columnwidth]{assets/2/H参数等效.svg}
        \caption{\textbf{$\boldsymbol{H}$ 参数等效电路}}\label{H参数等效电路}
    \end{figure}
\end{minipage}\end{center}



\section{MOSFET（金属氧化物半导体场效应晶体管）}

\subsection{MOSFET 基本概念}

MOSFET，是指 Metal Oxide Semiconductor Field Effect Transistor，它是数字电路的核心元素。小功率 FET 有 JFET、MOSFET，大功率 FET 有 VDMOS、IGBT 等，本课程主要面向 MOSFET。

%后文所说的 MOS，除非特别说明，一般都指 N 沟道增强型 MOS 管（N-Channel Enhancement-Type MOSFET），名称应拆解为 N 沟道、增强型、MOS、FET，与 N 沟道对应的有 P 沟道（P-Channel），与增强型对应的有耗尽型（Depletion-Type），与 MOS 对应的有结型，与 FET 对应的是有 BJT（双极型三极管）。
%\begin{center}\noindent\begin{minipage}{0.6\columnwidth}
%    \hspace*{2em} 图 \ref{N-MOS 示意图} 是一个 N-MOS 的示意图（ANSI 标准），
%    
%    \hspace*{2em} 栅极 G 和源级 S 之间的电压 $u_{\text{GS}}$ 会对 VCR 产生影响，主要表现为 D-S 开路（称为截止区）或非开路。在非开路情况下（$u_{\text{GS}}$ 超过阈值电压），$u_{\text{DS}}$ 会影响通过的电流 $i_{\text{DS}}$。总而言之，MOS 管可视为一个非线性的 VCVS。
%\end{minipage}\hfill\begin{minipage}{0.30\columnwidth}
%    \begin{figure}[H]\centering
%        \includesvg[width=\textwidth]{assets/1,2/MOS管符号.drawio.svg}
%        \caption{\textbf{N-MOS 示意图}}\label{N-MOS 示意图}
%    \end{figure}
%\end{minipage}\end{center}


\begin{center}\noindent\begin{minipage}{0.41\columnwidth}
    \hspace*{2em} 图 \ref{} 是 N-MOS 和 P-MOS 的符号（ANSI 标准），其中 N MOS 的箭头朝内（因为 Negative）电流方向是 D > S；P MOS 的箭头朝外（因为 Positive），电流方向是 S > D。

    \hspace*{2em} 需要特别强调的是，部分教材中会采用图 \ref{} 中的简化版 MOS 符号（例如参考文献 \cite{电路原理} \cite{电路原理导学导教}），一定注意这种符号的 {\color{red} 箭头朝向与简化前相反}！除非特殊情况，本文一律使用 ANSI 标准的符号。
\end{minipage}\hfill\begin{minipage}{0.53\columnwidth}
    \begin{figure}[H]\centering
        \includegraphics[width=\columnwidth]{assets/2/MOS管大全.pdf}
        \caption{\bfseries MOSFET 电路符号（ANSI 标准）与简化符号 }\label{}
    \end{figure}
\end{minipage}\end{center}



MOS 管的三个接线端分别称为栅极 G、源级 S 和漏级 D。由于 MOSFET 结构上的特点，没有电流流经栅极 G，因此可以把 D-S 看作一个二端元件，研究其伏安特性曲线 VCR。

在 N-MOS 中，栅极 G 和源级 S 之间的电压 $u_{\text{GS}}$ 会对 VCR 产生影响，主要表现为 D-S 开路（称为截止区）或非开路。在非开路情况下（$u_{\text{GS}}$ 超过阈值电压），$u_{\text{DS}}$ 会影响通过的电流 $i_{\text{DS}}$。而 P-MOS 则相反，栅极 G 和漏级 D 之间的电压 $u_{\text{GD}}$ 会对 VCR 产生影响，在非开路情况下（$u_{\text{GD}} > U_T$），$u_{\text{SD}}$ 会影响通过的电流 $i_{\text{SD}}$。

总而言之，无论是 N-MOS 还是 P-MOS，它们都可视为一个非线性的 VCVS。

\subsection{N-E MOSFET 外特性}

N-Channel Enhancement-Type MOSFET 的外特性总结如下：
\begin{enumerate}
\item 阈值电压 $U_T$: 使得 D-S 之间不再开路的电压阈值称为阈值电压（典型值为 1 V），需要注意 
\item 绝缘性：栅极 G 与其它电极绝缘，有 $i_{\text{GS}} = i_{\text{GD}} = 0$。
\item 最大电流 $i_{\text{DS},\text{max}}$：在非开路情况下，$i_{\text{DS},\text{max}} = \frac{K}{2}(u_{\text{GS}} - U_T)^2$，其中 $K$ 为常数（典型值 1 $\mathrm{mA\cdot V^{-2}}$）。
\item 导通电阻 $R_{\text{ON}}$: 在线性区时，MOS 管在 D-S 端体现出的电阻大小。
\item 电流特性 $i_{\text{DS}}$: MOS 管的电流特性可采取如下近似模型\footnote{更精确的模型详见参考文献 \cite{电路原理导学导教} Page 30.}
\begin{equation}
i_{\text{DS}} = 
\begin{cases}
    0 &, u_{\text{GS}} < U_T \\
    \frac{K}{2}(u_{\text{GS}} - U_T)^2\cdot \frac{u_{\text{DS}}}{(u_{\text{GS}} - U_T)} &, u_{\text{GS}} \geq U_T\ \& \ u_{\text{DS}} < u_{\text{GS}} - U_T \\ 
    \frac{K}{2}(u_{\text{GS}} - U_T)^2 &, u_{\text{GS}} \geq U_T\ \& \ u_{\text{DS}} \geqslant u_{\text{GS}} - U_T \\ 
\end{cases}
\end{equation}
\end{enumerate}




例如，$U_T = 1$ V，$K = 1\ \mathrm{mA \cdot V^{-2}}$ 时，N 沟道增强型 MOSFET 的电流特性如图 \ref{MOS 管的 iDS 电流特性} 所示\footnote{Matlab 源码见附录 \ref{MOS 管的 iDS 电流特性源码}}。

\begin{figure}[H]\centering
\begin{subfigure}[t]{0.67\textwidth}\centering
    \includegraphics[height=135pt]{assets/2/MOS管外特性.pdf}
    \caption{\bfseries $i_{\text{DS}} = i_{\text{DS}}(u_{\text{DS}}, u_{GS})$ 的函数图像 }
\end{subfigure}\begin{subfigure}[t]{0.33\textwidth}\centering
    \includegraphics[height=135pt]{assets/2/MOS管外特性 (2).pdf}
    \caption{\bfseries 在给定 $U_{GS}$ 下 $i_{\text{DS}} = i_{\text{DS}}(u_{\text{DS}})$ 的函数图像 }
\end{subfigure}
\caption{\bfseries N 沟道增强型 MOSFET 的 $i_{\text{DS}}$ 电流特性 }\label{MOS 管的 iDS 电流特性}
\end{figure}

\subsection{MOSFET 等效电路}

依 MOS 管的外特性，可分为三个区，截止区、线性区和恒流区，分别对应三个等效电路，如下图所示：
\begin{figure}[H]\centering
\includegraphics[width=0.63\textwidth]{assets/2/MOS管等效电路.png}
\caption{\bfseries MOS 管等效电路}\label{MOS管等效电路}
\end{figure}

事实上，MOS 管上下端连接负载（例如灯泡）时，在上方连接和在下方连接会有不同的效果，具体例子详见 \href{https://www.zhihu.com/question/34634572/answer/3421289786}{知乎: 为什么一般用 P-MOS 做上管，N-MOS 做下管}。

\section{数字系统}

\subsection{数字化的必要性}
数字化就是离散化：时间离散化和数值离散化。离散化可视为一定形式的特征提取，将一定范围内的信号值集总为一个值。数字化后，信号处理变得丰富多彩，且极大的削弱了噪声的影响。除了无法实现放大、振荡等少数信号处理方法，滤波、变频、调制解调都可以通过数字电路实现。数据压缩、解编码等在模拟系统中难以实现的信号变化功能在数字系统中很容易实现。

但也有一些场合不适合或无法数字化，例如放大器、振荡器、ADC 和 DAC 模拟端的滤波器、高频信号数字化成本高、信息处理量极大等情况。

\subsection{信号的离散化}

\subsubsection{多数位量化：}
最简单的量化是离散为 1 位数字信号（1 个二进制位），即划定电压分界值，电压信号大于此值时取 1，否则取 0。一般情况下，我们将电压范围 $[u_{\text{min}},\ u_{\text{max}}]$ 离散为 $2^n$ 个数值（即划分为 $2^n$ 个区间），共 $(2^n + 1)$ 个分界值，类似 linspace($u_{\text{min}}$, $u_{\text{max}}$, $2^n+1$)，最终得到数字信号 $0, 1, 2, \cdots, 2^n - 1$。

\subsubsection{并行传输与串行传输：}
为了传递 $n$ 位的数字信号，最常见的方法是 $n$ 条线并行传输，每一个时钟周期传输 $n$ 个二进制位，等价于一个模拟信号的离散值；也可以使用串行传输，每 $n$ 个时钟周期传输 $n$ 个二进制位，等价于一个模拟信号的离散值。并行传输的通信速率远远大于串行传输，但在高频系统中，并行信号线之间的串扰问题比较严重。

\subsubsection{量化单位 $\Delta$: }
量化单位指等距离散后两相邻离散值的距离，记为 $\Delta$，$1\  \Delta = 1\  \text{LSB} =  \frac{u_{\text{max}} - u_{\text{min}}}{2^n}$。当 $u_{\text{min}} = 0$ 时，也是离散值为 1 的信号对应的电压值。量化单位越小，量化误差越小，最大量化误差为 $\frac{\Delta }{2}$。

例如，将 $[0,\ 5\ \mathrm{V}]$ 的模拟信号离散为 3 位数字信号（3 个二进制位），此时 $1\  \Delta = 0.625\ \mathrm{V}$，最大量化误差为 0.3125 V。


\section{门电路}

将模拟信号转为数字信号，并对数字信号进行传递、分析、处理，最后进行输出（可能还需要将数字信号转回模拟信号），是现代信号处理的基本流程。

逻辑门是上述过程的基本元件。最常用的逻辑门如图 \ref{逻辑门} (a) 所示，其中反相器、与非门、或非门是基本门，可由 MOS 管直接构成，其它门则由基本门组合而成。它们之间的关系如图 \ref{逻辑门} (b) 所示。

\begin{figure}[H]\centering
\begin{subfigure}[t]{0.7\columnwidth}\centering
    \includegraphics[height=90pt]{assets/2/逻辑门.png}
    \caption{\bfseries 几种常见的逻辑门 }
\end{subfigure}\hfill
\begin{subfigure}[t]{0.3\columnwidth}\centering
    \includesvg[height=90pt]{assets/2/逻辑门关系.drawio.svg}
    \caption{\bfseries 逻辑门之间的关系 }
\end{subfigure}
\caption{\bfseries 逻辑门 }\label{逻辑门}
\end{figure}

反相器、与门、或门、与非门、或非门、异或门、同或门的英文简写分别为 NOT、AND、OR、NAND、NOR、XOR、XNOR。

\subsection{数字信号的运算}

数字信号是在有限域 $\Z_2$ 上进行运算的，有两种基本二元运算，一种基本一元运算，分别是与 “$+$”、或 “$\cdot$”、非 “$-$”。两种基本二元运算具有以下性质：

\begin{enumerate}
\item 交换律：$A + B = B + A$，$A \cdot B = B \cdot A$
\item 结合律：$(A + B) + C = A + (B + C)$，$(A \cdot B) \cdot C = A \cdot (B \cdot C)$
\item 分配律：$A \cdot (B + C) = A \cdot B + A \cdot C$，${\color{red} A + B \cdot C = (A + B) \cdot (A + C)}$
\item 吸收律：$A + A \cdot B = A$
\end{enumerate}

运算非“$-$” 的性质如下：
\begin{equation}
\begin{aligned}
    &\overline{(A + B)} = \overline{A} \cdot \overline{B} ,\quad &&\overline{(A \cdot B)} = \overline{A} + \overline{B} \\
    &A + B = \overline{(\overline{A} \cdot \overline{B})},\quad && A \cdot B = \overline{(\overline{A} + \overline{B})}
\end{aligned}
\end{equation}

在基本运算的基础上，还定义了二元运算异或“$\oplus$”、同或“$\odot$”，其定义如下：
\begin{equation}
\begin{aligned}
    A \oplus B &= A \cdot \overline{B} + \overline{A} \cdot B = (A + B) \cdot (\overline{A} + \overline{B})\\
    A \odot B &= A \cdot B  + \overline{A} \cdot \overline{B} = (A + \overline{B}) \cdot (\overline{A} + B)
\end{aligned}
\end{equation}


\subsection{基本逻辑门}

可以用 N-E-MOS（N 沟道增强型 MOS 管，N-Channel Enhancement-Type MOSFET）、电源、电阻构成三种基本逻辑门，如图 \ref{由 N-MOS 构成三种基本逻辑门}，但是它们的静态功率不为零。现实中广泛应用的是由 CMOS (Complementary Metal-Oxide-Semiconductor Transistor) 构成的基本逻辑门，如图 \ref{由 C-MOS 构成三种基本逻辑门} 所示，其中蓝色指 N-MOS，红色指 P-MOS。在这些基本门的结构上，相应地增加 MOS 管串联、并联的数量，可以实现 $n$ 输入的基本逻辑门。

CMOS 由一个 NMOS 和一个 PMOS 构成，无论输入是 0 或 1，都是一个 MOS 管导通，另一个截止（断开），因此静态功率为 0。实际生产中，CMOS 是单独的一个元件，内部已经集成了 NMOS 和 PMOS。

%\begin{figure}[H]\centering
%\begin{subfigure}[t]{0.33\columnwidth}\centering
%    \includegraphics[height=125pt]{assets/2/反相器.pdf}
%    \caption{\bfseries 反相器（CMOS） }
%\end{subfigure}\hfill
%\begin{subfigure}[t]{0.33\columnwidth}\centering
%    \includegraphics[height=125pt]{assets/2/与非门.pdf}
%    \caption{\bfseries 与非门 }
%\end{subfigure}
%\begin{subfigure}[t]{0.33\columnwidth}\centering
%    \includegraphics[height=125pt]{assets/2/或非门.pdf}
%    \caption{\bfseries 或非门 }
%\end{subfigure}
%\caption{\bfseries 基本逻辑门 }\label{基本逻辑门}
%\end{figure}

\begin{figure}[H]\centering
\begin{subfigure}[t]{0.33\columnwidth}\centering
    \includegraphics[height=120pt]{assets/2/NMOS NOT.pdf}
    \caption{\bfseries N-MOS NOT }
\end{subfigure}\hfill
\begin{subfigure}[t]{0.33\columnwidth}\centering
    \includegraphics[height=120pt]{assets/2/NMOS NOR.pdf}
    \caption{\bfseries N-MOS NOR }
\end{subfigure}
\begin{subfigure}[t]{0.33\columnwidth}\centering
    \includegraphics[height=120pt]{assets/2/NMOS NAND.pdf}
    \caption{\bfseries N-MOS NAND }
\end{subfigure}
\caption{\bfseries 由 N-MOS 构成三种基本逻辑门 }\label{由 N-MOS 构成三种基本逻辑门}
\end{figure}

\begin{figure}[H]\centering
    \begin{subfigure}[t]{0.33\columnwidth}\centering
        \includegraphics[height=120pt]{assets/2/CMOS NOT.pdf}
        \caption{\bfseries C-MOS NOT }
    \end{subfigure}\hfill
    \begin{subfigure}[t]{0.33\columnwidth}\centering
        \includegraphics[height=120pt]{assets/2/CMOS NOR.pdf}
        \caption{\bfseries C-MOS NOR }
    \end{subfigure}
    \begin{subfigure}[t]{0.33\columnwidth}\centering
        \includegraphics[height=120pt]{assets/2/CMOS NAND.pdf}
        \caption{\bfseries C-MOS NAND }
    \end{subfigure}
    \caption{\bfseries 由 C-MOS 构成三种基本逻辑门 }\label{由 C-MOS 构成三种基本逻辑门}
    \end{figure}

为了方便查阅，我们再给出 CMOS XOR 的电路图，如图 \ref{CMOS XOR} 所示，其静态功率为 0。

\begin{figure}[H]\centering
\includegraphics[width=0.42\columnwidth]{assets/2/CMOS XOR.pdf}
\caption{\bfseries CMOS XOR }\label{CMOS XOR}
\end{figure}

需要指出，上面的门电路只是几个例子，现实中实际使用的门电路可能比它们复杂得多，有时也用二极管和三极管来构成门电路，具体的例子见 \href{https://www.zhihu.com/question/36577129/answer/68096454}{知乎：怎样用电路符号表示异或门}。NOT 的功耗与其它特性可参考 \href{https://blog.csdn.net/vivid117/article/details/100083567}{数字电路基础知识：反相器（噪声容限、VTC、转换时间、速度的影响因素、传播延时等）}

\subsection{ADC 与 DAC}


简单的 ADC、DAC 可由二极管、电阻、运算放大器构成，后者详见“第二次习题课课前练习”。

\subsection{半加器}

半加器是一种基本的逻辑电路，用于将两个二进制数相加，输出“和位”与“进位”，记为 $S$，$C$，分别代表二进制输出的低位和高位。设输入为 $A$ 和 $B$，则有：
\begin{equation}
C = A \cdot B,\quad S = (A + B)\cdot \overline{C} = (A + B)\cdot \overline{(A \cdot B)} = (A + B)\cdot (\overline{A} + \overline{B})  = A\cdot \overline{B}  + \overline{A}\cdot B =  A \oplus B
\end{equation}

因此构造半加器最直接的方法是用一个异或门  XOR  和 一个与门 AND（3 N+ 3 P + 3 N 共 9 个 MOS）。如果要求使用的 MOS 尽量少（仅使用 N-MOS），对逻辑表达式作处理，利用下面式子可得最简半加器电路（7 个 N-MOS。

\begin{equation}
    C = \overline{(\overline{A\cdot B})},\quad S = \overline{\left[(A \cdot B) + \overline{(A + B)}\right]}
\end{equation}

它们的具体原理见图 \ref{两种半加器的原理}，实际电路如图 \ref{C-MOS 半加器} 和图 \ref{N-MOS 半加器} 所示。

\subsection{全加器}

由半加器可以进一步构造全加器，全加器是一种能够处理三个二进制数相加的逻辑电路，输出“和位”与“进位”，记为 $S$，$C$，分别代表二进制输出的低位和高位。设输入为 $A$、$B$ 和 $C_{\text{in}}$，则有：
\begin{equation}
\begin{aligned}
    C &= A \cdot B + A \cdot C_{\text{in}} + B \cdot C_{\text{in}}\\
    S &= A \oplus B \oplus C_{\text{in}}
\end{aligned}
\end{equation}

全加器的原理见图 \ref{全加器原理}，实际电路如图 \ref{C-MOS 全加器} 所示。

\newpage
\begin{figure}[H]\centering
\includegraphics[width=0.85\columnwidth]{assets/2/半加器原理.pdf}
\caption{\bfseries 两种半加器的原理}\label{两种半加器的原理}
\end{figure}

\begin{figure}[H]\centering
\includegraphics[width=0.85\columnwidth]{assets/2/CMOS 半加器.pdf}
\caption{\bfseries C-MOS 半加器}\label{C-MOS 半加器}
\end{figure}

\begin{figure}[H]\centering
\includegraphics[width=0.75\columnwidth]{assets/2/NMOS 半加器.pdf}
\caption{\bfseries N-MOS 半加器}\label{N-MOS 半加器}
\end{figure}

\chapter{线性电阻电路分析方法}
线性电阻电路，是指仅含独立源、受控源和线性电阻的电路。$2b$ 法是利用 KCL 和 KVL 的最基本方法，对具有 $b$ 条支路 $n$ 个节点的电路，列出 $(n -1)$ 个 KCL 方程和 $(b - n +1)$ 个 KVL 方程进行求解，较为繁琐。本章将介绍多种线性电阻电路分析方法，其中几种非常重要，不仅是一种方法，更应当作一种思想，要能够熟练而灵活地运用，例如节点电压法等。


\section{支路电流法}

列出节点处的 KCL 和所有网格的 KVL 进行求解，略。

\section{节点电压法}

直接给出总结：对含有 $n+1$ 节点，$p$ 无伴电压源，$q$ 受控源的电路，在选定合适的参考点后，列出 $(n-p)$ 个节点 KCL 方程（可能含超节点），$p$ 个超节点电压方程，$q$ 个受控限制方程，求解得到 $ n $ 个电压变量和 $q$ 个受控源变量。

\subsection{没有无伴电压源}

$p = 0$ 时，没有无伴电压源，可列出节点电压法的标准方程：
\begin{equation}
    \boldsymbol{G}\cdot \boldsymbol{U} = \boldsymbol{I},\quad 
    \begin{bmatrix}
        G_{11}&G_{12}&\cdots&G_{1k}&\cdots&G_{1n}\\G_{21}&G_{22}&\cdots&G_{2k}&\cdots&G_{2n}\\\vdots&\vdots&&\vdots&&\vdots\\G_{k1}&G_{k2}&\cdots&G_{kk}&\cdots&G_{kn}\\\vdots&\vdots&&\vdots&&\vdots\\G_{n1}&G_{n2}&\cdots&G_{nk}&\cdots&G_{nn}\end{bmatrix}\begin{bmatrix}U_{1}\\U_{2}\\\vdots\\U_{k}\\\vdots\\U_{n}\end{bmatrix}=\begin{bmatrix}I_{\mathrm{Sn, 1}}\\I_{\mathrm{Sn, 2}}\\\vdots\\I_{\mathrm{Sn, k}}\\\vdots\\I_{\mathrm{Sn, n}}
    \end{bmatrix}
\end{equation}
其中，$G_{kk}$ 是第 $k$ 个独立节点的自电导，也即节点 $k$ 所有支路上的电导之和；$G_{ij}\ (i \ne j)$ 是节点 $i$ 和节点 $j$ 之间的互电导，数值上等于节点 $i$ 与节点 $j$ 间的所有电导之和并 {\color{red} 冠以负号}。特别地，节点之间仅有电流源的支路互电导为 0。$I_{\ \text{Sn,k}}$ 是流入节点 $k$ 所有电流源电流的代数和（包括由有伴电压源等效而来的电流），{\color{red} 流入节点的电流取正}。

在仅含电阻、有伴电压源和电流源的电路中，因为互电导 $G_{ij} = G_{ji}$，因此

注意，在列节点电压法的方程时，我们记流入节点的电流为正，这是在 KCL 中假设了流出节点的电流取正得到的结果。

\subsection{有一个无伴电压源}

对于仅有一个无伴电压源的情况，将参考节点选在无伴电压源的负极，仍可以列出节点电压法的标准方程，此后同上。

\subsection{有多个无伴电压源}

有 $p$ 个无伴电压源时（$p>1$），将参考点选在其中一个的负极（其实也可以不选），然后将剩余的无伴电压源看作超节点。列出各节点的 KCL 方程（共 $(n-p)$ 个），其中，超节点的自电导由超节点中的子节点贡献（不止一项），与其它节点的互电导是整个大节点与另一节点之间的互电导。具体的例子见参考文献 \cite{电路原理} Page 108 的例 3.2.5，这里不再赘述。


\section{回路电流法}



\section{叠加定理与齐性定理}
\section{替代定理}
\section{戴维南定理和诺顿定理}
\section{特勒根定理}
\section{互易定理}
\section{对偶电路和对偶原理}





































































































































































































































































































































































































































































\nocite{*}
\bibliography{re}
\thispagestyle{fancy} 
\addcontentsline{toc}{chapter}{参考文献}




\newpage
\appendix
\titlespacing*{\chapter}{0pt}{-15pt}{8pt} % 控制上方空白的大小
\titleformat{\section}{\large\centering\bfseries}{\thesection}{1em}{}
\titleformat{\subsection}{\normalsize\bfseries}{\thesubsection}{1em}{}

\chapter*{附录 A: 中英文对照表}\addcontentsline{toc}{chapter}{附录 A: 中英文对照表}\thispagestyle{fancy} 
\begin{multicols}{2}  
\begin{table}[H]\centering
\caption{\textbf{中英文对照表}}
\begin{tabular}{cccccccc}\toprule
    English & 中文 \\
    \midrule
    voltage            & 电压 \\
    current            & 电流 \\
    power              & 功率 \\
    resistance         & 电阻 \\
    conductance        & 电导 \\
    inductance         & 电感 \\
    capacitance        & 电容 \\
    resistor           & 电阻器 \\
    capacitor          & 电容器 \\
    inductor           & 电感器 \\
    frequency          & 频率 \\
    circuit            & 电路 \\
    circuit element    & 电流元件 \\
    signal             & 信号 \\
    circuit analysis   & 电路分析 \\
    circuit synthesis  & 电路综合 \\
    circuit design     & 电路设计 \\
    circuit topology   & 电路拓扑 \\
    electromotive force, e.m.f. & 电动势 \\
    potential & 电势 \\
    reference point & 参考点 \\
    potential rise & 电势升 \\
    potential drop & 电势降 \\
    terminal & 端纽，接线端\\ 
    source & 源 \\
    load & 负载 \\
    independent source & 独立源 \\ 
    independent voltage source & 独立电压源 \\ 
    independent current source & 独立电流源 \\ 
    excitation & 激励 \\
    response & 响应 \\
    n-port network & n 端口网络 \\
    instantaneous power & 瞬时功率 \\
    average value & 平均值 \\
    average absolute value & 绝对平均值 \\
    effective value & 有效值 \\
    \bottomrule
\end{tabular}
\end{table}

\begin{table}[H]\centering
    \caption{\textbf{中英文对照表}}
    \begin{tabular}{cccccccc}\toprule
        English & 中文 \\
        \midrule
        sinusoidal altering current & 正弦交流电流 \\
        \bottomrule
    \end{tabular}
\end{table}

\end{multicols} 

% 附录 B
\chapter*{附录 B\hspace*{20pt} 电路原理 Q \& A}\addcontentsline{toc}{chapter}{附录 B\hspace*{6pt}  电路原理 Q \& A}   
\thispagestyle{fancy} 
\setcounter{section}{0}   
\renewcommand\thesection{B.\arabic{section}}   
\renewcommand{\thefigure}{B.\arabic{figure}} 
\renewcommand{\thetable}{B.\arabic{table}}

\section{第一章}

\section{第二章}

\subsection{二端口互易或对称的意义是什么？}

无论是什么参数，互易代表此电路可以被简单的电阻电路所等效，对称则代表交换端口两边的激励，所得输出也会相应交换。

例如，对 $\boldsymbol{R}$、$\boldsymbol{G}$ 和 $\boldsymbol{T}$ 参数而言，若满足互易，则原电路可以等效为由三个电阻构成的新电路（分别是 T、$\pi$、T 型），这降低了电路分析和设计的难度。

例如，若某二端口的 $\boldsymbol{R}$ 参数满足互易，则它可以等效为一个 T 型电阻电路。假设现在激励 $i_1$ 加在左侧，$i_2$ 加在右侧，左右侧电压分别为 $u_1, u_2$，那么我们交换两端的激励，也即 $i_2$ 加在左侧，$i_1$ 加在右侧，相应地，左侧便得到电压 $u_2$，右侧得到电压 $u_1$。

\subsection{具有公共端的三端元件可视为二端口吗？}

具有（唯一）公共端的 $n+1$ 端元件可视为 $n$ 端口网络，因此有公共端的三端元件可以视为一个二端口。并且，两个具有公共端的二端口，将公共端并联在一起不会破坏端口条件，将公共端串联在一起也不会破坏端口条件。

\subsection{将具有公共端的三端元件看作二端口时，如何理解公共端一边流出 $i_1$，另一边流出 $i_2$？}

\section{第三章}
















% 附录 C
\chapter*{附录 C. Matlab 代码}\addcontentsline{toc}{chapter}{附录 C. Matlab 代码}   
\thispagestyle{fancy} 
\setcounter{section}{0}   
\renewcommand\thesection{C.\arabic{section}}   
\renewcommand{\thefigure}{C.\arabic{figure}} 
\renewcommand{\thetable}{C.\arabic{table}}

\section{图 \ref{MOS 管的 iDS 电流特性} 源码}\label{MOS 管的 iDS 电流特性源码}
\begin{matlablisting}
% MOSFET 外特性

K = 1 * 10^(-3);
U_T = 1;

i_DS = @(u_DS, u_GS, U_T, K) ... 
    (u_GS > U_T).*(   ...
        (u_DS < (u_GS - U_T)) .* K/2.*(u_GS - U_T).*u_DS + (~(u_DS < (u_GS - U_T))) .* K/2.*(u_GS - U_T).^2  ...
    );

u_GS_array = linspace(0, 3, 50);
u_DS_array = linspace(0, 2*(3 - U_T), 100);
Z = zeros(length(u_GS_array), length(u_DS_array));
for i = 1:length(u_GS_array)
    Z(i, :) = i_DS(u_DS_array, u_GS_array(i) , U_T, K);
end

stc = MyMesh(u_DS_array, u_GS_array, Z, 1);
stc.axes_left.XLabel.String =  '$u_{DS}$ (V)';
stc.axes_left.YLabel.String =  '$u_{GS}$ (V)';
stc.axes_left.ZLabel.String =  '$i_{DS}$ (A)';
stc.axes_right.XLabel.String =  '$u_{DS}$ (V)';
stc.axes_right.YLabel.String =  '$u_{GS}$ (V)';
stc.title.String = '';
%MyExport_pdf_modal

stc = MyPlot(u_DS_array, [i_DS(u_DS_array, 3 , U_T, K); i_DS(u_DS_array, 2.5 , U_T, K); i_DS(u_DS_array, 2 , U_T, K); i_DS(u_DS_array, 1.5 , U_T, K); i_DS(u_DS_array, 0 , U_T, K)]);
stc.leg.Interpreter = 'latex';
stc.leg.FontSize = 12;
stc.leg.Location = 'northwest';
stc.label.x.String = '$u_{DS}$ (V)';
stc.label.y.String = '$i_{DS}$ (A)';
stc.axes.Title.String = '';
hold on 
p = plot(linspace(0, 2, 40), K/2.*(linspace(0, 2, 40) + 1 - U_T).^2);
p.LineStyle = '-.';
p.LineWidth = 0.8;
p.Color = [0.6, 0.6, 0.6];
stc.leg.String = ["$u_{GS} = 3$ V"; "$u_{GS} = 2.5$ V"; "$u_{GS} = 2$ V"; "$u_{GS} = 1.5$ V"; "$u_{GS} = 0$ V"; "$\frac{K}{2}(U_{GS} - U_{T})^2$"];
%MyExport_pdf
\end{matlablisting}







\end{document}



% VScode 常用快捷键：

% F2:                       变量重命名
% Ctrl + Enter:             行中换行
% Alt + up/down:            上下移行
% 鼠标中键 + 移动:           快速多光标
% Shift + Alt + up/down:    上下复制
% Ctrl + left/right:        左右跳单词
% Ctrl + Backspace/Delete:  左右删单词    
% Shift + Delete:           删除此行
% Ctrl + J:                 打开 VScode 下栏(输出栏)
% Ctrl + B:                 打开 VScode 左栏(目录栏)
% Ctrl + `:                 打开 VScode 终端栏
% Ctrl + 0:                 定位文件
% Ctrl + Tab:               切换已打开的文件(切标签)
% Ctrl + Shift + P:         打开全局命令(设置)

% Latex 常用快捷键

% Ctrl + Alt + J:           由代码定位到PDF
% 


% Git提交规范：
% update: Linear Algebra 2 notes
% add: Linear Algebra 2 notes
% import: Linear Algebra 2 notes
% delete: Linear Algebra 2 notes